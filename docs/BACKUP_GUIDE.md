# 💾 売上カレンダー バックアップガイド

## 🚀 クイックスタート

### バックアップ管理画面を開く
```
C:\Users\user\OneDrive\デスクトップ\売上カレンダー\backup_manager.html
```

## 📊 バックアップの種類

### 1. 自動バックアップ（推奨）
**設定方法：**
1. backup_manager.htmlを開く
2. 「自動バックアップ設定」でバックアップ間隔を選択
   - **24時間ごと**（推奨）
   - 1時間ごと
   - 6時間ごと
   - 12時間ごと
   - 週1回

3. 「設定を保存」をクリック

**特徴：**
- 設定した間隔で自動実行
- Supabaseとローカルストレージの両方に保存
- 最大10件の履歴を自動管理

### 2. 手動バックアップ
**実行方法：**
- **今すぐバックアップ作成**: クリックで即座にバックアップ
- **PCにダウンロード**: JSONファイルとしてPCに保存
- **メールで送信**: （今後実装予定）

**使用場面：**
- 重要な変更前
- 月末・年度末の記録
- デバイス変更前

## 🔧 データ復元方法

### 方法1: ファイルから復元
1. 「ファイルから復元」ボタンをクリック
2. 保存したJSONファイルを選択
3. 確認ダイアログで「OK」

### 方法2: Supabaseから復元
1. 「Supabaseから最新データを復元」をクリック
2. 自動的に最新データを取得

### 方法3: バックアップ履歴から復元
1. バックアップ履歴から復元したい日時を選択
2. 「復元」ボタンをクリック
3. 確認ダイアログで「OK」

## 📁 バックアップファイルの保存場所

### 自動保存場所
- **Supabase**: クラウド上に自動保存
- **ローカルストレージ**: ブラウザ内に自動保存

### 手動ダウンロード時のファイル名
```
売上カレンダー_バックアップ_YYYY-MM-DD-HH-mm-ss.json
```

## ⚠️ 注意事項

### データ保護のベストプラクティス
1. **定期バックアップを有効にする**（24時間ごと推奨）
2. **月1回は手動でPCにダウンロード**
3. **重要な変更前は必ずバックアップ**

### バックアップ容量
- ローカルストレージ: 最大10件
- Supabase: 無制限（無料プランの範囲内）
- PCダウンロード: 制限なし

## 🆘 トラブルシューティング

### バックアップが作成されない
1. インターネット接続を確認
2. Supabaseの状態を確認
3. ブラウザのキャッシュをクリア

### 復元できない
1. ファイル形式を確認（.json）
2. ファイルが破損していないか確認
3. 別のバックアップから復元を試みる

### 自動バックアップが動作しない
1. ブラウザタブを開いたままにする
2. PCがスリープしないよう設定
3. 手動バックアップで代替

## 📝 推奨運用

### 日常運用
- 自動バックアップ: **24時間ごと**
- 確認頻度: 週1回バックアップ履歴を確認

### 月末処理
1. 手動バックアップを作成
2. PCにダウンロード
3. 外部ストレージにも保存（USB等）

### 年度末処理
1. 全データをバックアップ
2. 複数の場所に保存
   - PC
   - クラウドストレージ（Google Drive等）
   - 外部メディア（USB、外付けHDD）

## 🔒 セキュリティ

### データの安全性
- Supabase: SSL暗号化通信
- ローカル: ブラウザのセキュリティに依存
- ダウンロード: ローカルPCのセキュリティに依存

### プライバシー
- データは`shared_user_2024`で共有
- 個人情報は含まれない設計
- バックアップファイルは暗号化なし（取り扱い注意）

## 📞 サポート

問題が発生した場合：
1. このガイドを確認
2. backup_manager.htmlの「使い方」セクションを確認
3. システム管理者に連絡